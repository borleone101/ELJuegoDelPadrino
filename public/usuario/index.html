<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>El Padrino â€” Mi Panel</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Source+Sans+3:wght@400;600&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<style>
:root{
  --ink:#0c0a07;--ink2:#131009;--ink3:#1b1610;--ink4:#241c12;
  --red:#8b1a1a;--red2:#b52020;--red3:#d42828;
  --gold:#b8860b;--gold2:#d4a017;--gold3:#e8c04a;
  --cream:#e6dcc8;--muted:#8a7a62;--dim:#4a3c2a;
  --border:rgba(139,26,26,.22);--bord-g:rgba(212,160,23,.15);
  --nav-h:60px;--bot-h:64px;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth;-webkit-tap-highlight-color:transparent}
body{font-family:'Source Sans 3',sans-serif;background:var(--ink);color:var(--cream);min-height:100vh}
button,a{font-family:inherit;cursor:pointer;text-decoration:none}
input,select,textarea{font-family:inherit}
img{max-width:100%}
::-webkit-scrollbar{width:4px}
::-webkit-scrollbar-track{background:var(--ink2)}
::-webkit-scrollbar-thumb{background:var(--dim);border-radius:4px}

/* TOPBAR */
.topbar{
  position:sticky;top:0;z-index:400;height:var(--nav-h);
  background:rgba(13,10,7,.96);backdrop-filter:blur(12px);
  border-bottom:1px solid var(--border);
  display:flex;align-items:center;justify-content:space-between;
  padding:0 1rem 0 1.1rem;
}
.tb-brand{font-family:'Oswald',sans-serif;font-size:1.15rem;font-weight:700;color:var(--gold2);letter-spacing:.12em;display:flex;align-items:center;gap:.4rem}
.tb-brand svg{flex-shrink:0}
.tb-right{display:flex;align-items:center;gap:.5rem}
.tb-chip{display:flex;align-items:center;gap:.38rem;background:var(--ink3);border:1px solid var(--bord-g);border-radius:20px;padding:.3rem .75rem .3rem .4rem}
.tb-avatar{width:26px;height:26px;border-radius:50%;flex-shrink:0;background:linear-gradient(135deg,var(--red),var(--gold2));display:flex;align-items:center;justify-content:center;font-family:'Oswald',sans-serif;font-size:.75rem;font-weight:700;color:#fff}
.tb-name{font-size:.82rem;font-weight:600;color:var(--cream);max-width:80px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.btn-exit{width:34px;height:34px;border-radius:8px;background:rgba(139,26,26,.18);border:1px solid rgba(139,26,26,.3);color:#f87171;display:flex;align-items:center;justify-content:center;font-size:1rem;transition:background .2s}
.btn-exit:hover{background:rgba(139,26,26,.38)}

/* HERO CARD */
.hero-wrap{padding:.9rem 1rem 0}
.hero-card{
  background:linear-gradient(145deg,#1e150c,#130f08,#0e0b06);
  border:1px solid var(--border);border-radius:16px;
  padding:1.4rem 1.3rem 1.2rem;
  position:relative;overflow:hidden;
  box-shadow:0 8px 32px rgba(0,0,0,.4);
}
.hero-card::before{
  content:'';position:absolute;inset:0;pointer-events:none;
  background:radial-gradient(ellipse 60% 100% at -5% 50%,rgba(139,26,26,.18),transparent 65%),
             radial-gradient(ellipse 40% 60% at 105% 20%,rgba(212,160,23,.07),transparent 60%);
}
.hero-deco{
  position:absolute;right:.8rem;bottom:-.4rem;
  font-size:5.5rem;opacity:.05;pointer-events:none;filter:grayscale(1);
}
.hero-inner{position:relative;z-index:1}
.hero-label{font-family:'Oswald',sans-serif;font-size:.67rem;letter-spacing:.22em;text-transform:uppercase;color:var(--muted);margin-bottom:.4rem}
.hero-amount{font-family:'Oswald',sans-serif;font-size:2.7rem;font-weight:700;color:var(--gold2);line-height:1;margin-bottom:.3rem}
.hero-amount sup{font-size:1rem;color:var(--muted);font-weight:400;margin-right:.2rem}
.hero-sub{font-size:.82rem;color:var(--muted)}
.hero-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem;margin-top:1.1rem}
.hs-box{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.06);border-radius:9px;padding:.6rem .5rem;text-align:center}
.hs-val{font-family:'Oswald',sans-serif;font-size:1.3rem;font-weight:700;color:#fff}
.hs-lbl{font-size:.63rem;color:var(--muted);text-transform:uppercase;letter-spacing:.1em;margin-top:.1rem}

/* DESKTOP TABS */
.tab-bar-desktop{display:flex;gap:.4rem;padding:.9rem 1rem 0}
.tbd{font-family:'Oswald',sans-serif;font-size:.85rem;font-weight:600;letter-spacing:.07em;padding:.45rem 1.1rem;border-radius:7px;background:transparent;border:1px solid var(--border);color:var(--muted);transition:all .18s;display:flex;align-items:center;gap:.33rem}
.tbd i{font-size:.88rem}
.tbd:hover{border-color:var(--bord-g);color:var(--gold2)}
.tbd.active{background:rgba(139,26,26,.2);border-color:var(--border);color:var(--gold2)}

/* MOBILE BOTTOM NAV */
.tab-bar-mobile{display:none;position:fixed;bottom:0;left:0;right:0;z-index:400;background:rgba(13,10,7,.97);backdrop-filter:blur(12px);border-top:1px solid var(--border);padding:.3rem 0 env(safe-area-inset-bottom,.3rem)}
.tbm-grid{display:grid;grid-template-columns:repeat(3,1fr)}
.tbm{display:flex;flex-direction:column;align-items:center;gap:.18rem;background:none;border:none;color:var(--muted);font-family:'Oswald',sans-serif;font-size:.64rem;letter-spacing:.07em;padding:.42rem .5rem;transition:color .18s}
.tbm i{font-size:1.2rem}
.tbm.active{color:var(--gold2)}

/* CONTENT */
.content{padding:.9rem 1rem 1.5rem}
.section{display:none;animation:fadeUp .28s ease}
.section.active{display:block}
@keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.sec-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;flex-wrap:wrap;gap:.5rem}
.sec-title{font-family:'Oswald',sans-serif;font-size:1.2rem;font-weight:700;letter-spacing:.04em;color:#fff;display:flex;align-items:center;gap:.4rem}
.sec-title i{color:var(--gold2)}

/* SORTEO CARDS */
.sorteo-grid{display:flex;flex-direction:column;gap:.85rem}
.sorteo-card{background:var(--ink2);border:1px solid var(--border);border-radius:13px;overflow:hidden;transition:border-color .2s,transform .18s,box-shadow .2s}
.sorteo-card:hover{border-color:rgba(212,160,23,.28);transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.3)}
.sc-body{padding:1rem 1.1rem .85rem}
.sc-row1{display:flex;align-items:flex-start;justify-content:space-between;gap:.5rem;margin-bottom:.7rem}
.sc-title{font-family:'Oswald',sans-serif;font-size:1.05rem;font-weight:600;color:#fff}
.sc-round{font-size:.75rem;color:var(--muted);margin-top:.15rem;display:flex;align-items:center;gap:.28rem}
.sc-round i{color:var(--gold);font-size:.7rem}
.sc-price{background:rgba(212,160,23,.1);border:1px solid var(--bord-g);border-radius:8px;padding:.3rem .7rem;font-family:'Oswald',sans-serif;font-size:.95rem;font-weight:700;color:var(--gold2);white-space:nowrap;flex-shrink:0;text-align:center}
.sc-price span{display:block;font-size:.6rem;color:var(--muted);font-weight:400;letter-spacing:.1em;text-transform:uppercase}
.prog-wrap{margin-bottom:.7rem}
.prog-meta{display:flex;justify-content:space-between;align-items:center;margin-bottom:.35rem}
.prog-meta span{font-size:.78rem;color:var(--muted)}
.prog-meta strong{font-family:'Oswald',sans-serif;font-size:.88rem;color:var(--gold2)}
.prog-bg{height:6px;background:rgba(255,255,255,.05);border-radius:10px;overflow:hidden}
.prog-fill{height:100%;border-radius:10px;transition:width .5s ease;background:linear-gradient(90deg,var(--red),var(--gold2))}
.prog-fill.almost{background:linear-gradient(90deg,var(--gold),var(--gold3))}
.prog-fill.full{background:linear-gradient(90deg,#2a6a2a,#4ade80)}
.sc-foot{padding:.65rem 1.1rem;background:var(--ink3);border-top:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:.5rem;flex-wrap:wrap}
.sc-foot-info{font-size:.78rem;color:var(--muted);display:flex;align-items:center;gap:.3rem}
.sc-foot-info i{color:var(--gold);font-size:.75rem}
.my-ticket-notice{margin-top:.6rem;background:rgba(26,90,154,.1);border:1px solid rgba(26,90,154,.25);border-radius:7px;padding:.45rem .7rem;font-size:.8rem;color:#93c5fd;display:flex;align-items:center;gap:.4rem}
.my-ticket-notice i{flex-shrink:0}

/* BTNS */
.btn{font-family:'Oswald',sans-serif;font-weight:600;letter-spacing:.07em;border:none;border-radius:6px;cursor:pointer;transition:all .18s;display:inline-flex;align-items:center;gap:.3rem}
.btn-sm{font-size:.77rem;padding:.28rem .7rem}
.btn-md{font-size:.88rem;padding:.47rem 1.1rem}
.btn-ghost{background:rgba(212,160,23,.08);color:var(--gold2);border:1px solid var(--bord-g)}.btn-ghost:hover{background:rgba(212,160,23,.18)}
.btn-comprar{background:linear-gradient(135deg,var(--red),#a82222);color:#fff;font-family:'Oswald',sans-serif;font-weight:600;letter-spacing:.08em;font-size:.9rem;padding:.52rem 1.3rem;border-radius:8px;border:none;cursor:pointer;box-shadow:0 4px 16px rgba(139,26,26,.35);transition:all .2s;display:inline-flex;align-items:center;gap:.3rem}
.btn-comprar:hover{background:linear-gradient(135deg,var(--red2),var(--red3));box-shadow:0 6px 20px rgba(139,26,26,.5);transform:translateY(-1px)}
.btn-comprar:disabled{opacity:.42;cursor:not-allowed;transform:none;box-shadow:none}
.btn-inscrito{background:rgba(26,90,154,.18);color:#93c5fd;border:1px solid rgba(26,90,154,.28);font-family:'Oswald',sans-serif;font-weight:600;letter-spacing:.08em;font-size:.88rem;padding:.5rem 1.1rem;border-radius:8px;cursor:default;display:inline-flex;align-items:center;gap:.3rem}

/* BADGES */
.bdg{display:inline-flex;align-items:center;gap:.2rem;font-family:'Oswald',sans-serif;font-size:.68rem;font-weight:600;letter-spacing:.07em;padding:.18rem .58rem;border-radius:20px;white-space:nowrap}
.bdg-p{background:rgba(212,160,23,.14);color:var(--gold2);border:1px solid rgba(212,160,23,.28)}
.bdg-ok{background:rgba(58,138,58,.14);color:#4ade80;border:1px solid rgba(58,138,58,.28)}
.bdg-bad{background:rgba(139,26,26,.2);color:#f87171;border:1px solid rgba(139,26,26,.32)}
.bdg-open{background:rgba(26,90,154,.14);color:#60a5fa;border:1px solid rgba(26,90,154,.28)}
.bdg-win{background:linear-gradient(135deg,rgba(139,26,26,.18),rgba(184,134,11,.18));color:var(--gold2);border:1px solid rgba(212,160,23,.3)}

/* HISTORIAL / PAGOS */
.hist-list,.pago-list{display:flex;flex-direction:column;gap:.65rem}
.hist-item,.pago-item{background:var(--ink2);border:1px solid var(--border);border-radius:10px;padding:.85rem 1rem;display:flex;align-items:center;gap:.8rem;transition:border-color .18s}
.hist-item:hover,.pago-item:hover{border-color:var(--bord-g)}
.item-icon{width:38px;height:38px;border-radius:50%;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:1rem}
.icon-win{background:rgba(212,160,23,.12);color:var(--gold2)}
.icon-lose{background:rgba(139,26,26,.12);color:#f87171}
.icon-pend{background:rgba(26,90,154,.12);color:#60a5fa}
.icon-pay{background:rgba(139,26,26,.1);color:var(--gold)}
.item-body{flex:1;min-width:0}
.item-title{font-family:'Oswald',sans-serif;font-size:.93rem;font-weight:600;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.item-sub{font-size:.76rem;color:var(--muted);margin-top:.1rem}
.item-right{flex-shrink:0;text-align:right}
.item-date{font-size:.72rem;color:var(--dim)}
.item-amount{font-family:'Oswald',sans-serif;font-size:.95rem;color:var(--gold2);margin-bottom:.12rem}

/* EMPTY / SPINNER */
.empty{text-align:center;padding:2.8rem 1rem}
.empty i{font-size:2.5rem;color:var(--dim);display:block;margin-bottom:.6rem}
.empty p{color:var(--muted);font-size:.9rem;line-height:1.5}
.spin-wrap{display:flex;align-items:center;justify-content:center;padding:3rem}
.spinner{width:30px;height:30px;border:3px solid rgba(212,160,23,.1);border-top-color:var(--gold2);border-radius:50%;animation:spin .7s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* SWAL */
.swal2-popup{background:#131009!important;border:1px solid rgba(139,26,26,.25)!important;color:#e6dcc8!important;font-family:'Source Sans 3',sans-serif!important;border-radius:16px!important;box-shadow:0 24px 64px rgba(0,0,0,.6)!important}
.swal2-title{color:#fff!important;font-family:'Oswald',sans-serif!important;letter-spacing:.04em!important;font-size:1.3rem!important}
.swal2-html-container{color:#8a7a62!important;font-size:.92rem!important;line-height:1.6!important}
.swal2-confirm{background:var(--red)!important;font-family:'Oswald',sans-serif!important;font-weight:600!important;letter-spacing:.08em!important;border-radius:7px!important;padding:.55rem 1.4rem!important}
.swal2-cancel{background:#221c14!important;color:#8a7a62!important;border:1px solid rgba(139,26,26,.22)!important;font-family:'Oswald',sans-serif!important;border-radius:7px!important}
.swal2-confirm:hover{background:var(--red2)!important}
.swal2-input,.swal2-file{background:#1b1610!important;border:1px solid rgba(139,26,26,.28)!important;color:#e6dcc8!important;border-radius:8px!important}
.swal2-input:focus{border-color:#d4a017!important;box-shadow:none!important}
.swal2-image{border-radius:12px!important;border:2px solid rgba(212,160,23,.2)!important}
.qr-wrap{background:var(--ink3);border:1px solid var(--bord-g);border-radius:12px;padding:.9rem;margin-bottom:.8rem;text-align:center}
.qr-wrap img{border-radius:8px;max-width:200px;width:100%;margin:0 auto;display:block}
.qr-label{font-family:'Oswald',sans-serif;font-size:.72rem;letter-spacing:.15em;text-transform:uppercase;color:var(--muted);margin-top:.5rem}
.info-row{display:flex;align-items:flex-start;gap:.4rem;background:rgba(212,160,23,.05);border:1px solid rgba(212,160,23,.15);border-radius:8px;padding:.6rem .8rem;font-size:.81rem;color:var(--muted);margin-bottom:.7rem;text-align:left}
.info-row i{color:var(--gold2);flex-shrink:0;margin-top:.1rem}
.upload-area{border:2px dashed rgba(212,160,23,.25);border-radius:10px;padding:1.1rem;text-align:center;cursor:pointer;transition:all .2s;background:rgba(212,160,23,.03);position:relative}
.upload-area:hover,.upload-area.dragover{border-color:var(--gold2);background:rgba(212,160,23,.08)}
.upload-area input[type=file]{position:absolute;inset:0;opacity:0;cursor:pointer}
.upload-area i{font-size:1.7rem;color:var(--muted);display:block;margin-bottom:.35rem}
.upload-area p{font-size:.81rem;color:var(--muted)}
.upload-area .ua-accept{font-size:.7rem;color:var(--dim);margin-top:.18rem}
#previewImg{width:100%;max-height:140px;object-fit:contain;border-radius:8px;border:1px solid var(--bord-g);margin-top:.6rem;display:none}
.file-selected{font-size:.8rem;color:var(--gold2);margin-top:.4rem;display:none;align-items:center;gap:.3rem}

/* RESPONSIVE */
@media(max-width:600px){
  .tab-bar-desktop{display:none}
  .tab-bar-mobile{display:block}
  .content{padding-bottom:calc(var(--bot-h) + 1rem)}
  .hero-amount{font-size:2.2rem}
}
@media(min-width:601px){
  .tab-bar-mobile{display:none!important}
  .hero-wrap{padding:1.1rem 1.2rem 0}
  .tab-bar-desktop{padding:1rem 1.2rem 0}
  .content{padding:1rem 1.2rem 2rem}
  .sorteo-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(290px,1fr))}
  .hist-list,.pago-list{display:grid;grid-template-columns:1fr 1fr;gap:.7rem}
}
@media(min-width:860px){
  .hero-wrap,.tab-bar-desktop,.content{max-width:880px;margin-left:auto;margin-right:auto}
}
</style>
</head>
<body>

<header class="topbar">
  <div class="tb-brand">
    <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="#d4a017" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 2L4 7v5c0 5 3.5 9.74 8 11 4.5-1.26 8-6 8-11V7L12 2z"/>
    </svg>
    EL PADRINO
  </div>
  <div class="tb-right">
    <div class="tb-chip">
      <div class="tb-avatar" id="tbAvatar">?</div>
      <span class="tb-name" id="tbName">â€”</span>
    </div>
    <button class="btn-exit" id="logoutBtn" title="Salir"><i class="bi bi-box-arrow-right"></i></button>
  </div>
</header>

<div class="hero-wrap">
  <div class="hero-card">
    <div class="hero-deco">ðŸŽ©</div>
    <div class="hero-inner">
      <div class="hero-label">Mi saldo disponible</div>
      <div class="hero-amount"><sup>Bs</sup><span id="heroSaldo">0.00</span></div>
      <div class="hero-sub" id="heroSub">Cargando...</div>
      <div class="hero-stats">
        <div class="hs-box"><div class="hs-val" id="stJugados">â€”</div><div class="hs-lbl">Jugados</div></div>
        <div class="hs-box"><div class="hs-val" id="stGanados" style="color:var(--gold2)">â€”</div><div class="hs-lbl">Ganados</div></div>
        <div class="hs-box"><div class="hs-val" id="stPend">â€”</div><div class="hs-lbl">Pendientes</div></div>
      </div>
    </div>
  </div>
</div>

<div class="tab-bar-desktop">
  <button class="tbd active" data-sec="sorteos"><i class="bi bi-ticket-perforated-fill"></i>Sorteos</button>
  <button class="tbd" data-sec="historial"><i class="bi bi-clock-history"></i>Historial</button>
  <button class="tbd" data-sec="pagos"><i class="bi bi-receipt"></i>Mis pagos</button>
</div>

<div class="content">
  <div class="section active" id="sec-sorteos">
    <div class="sec-head">
      <div class="sec-title"><i class="bi bi-ticket-perforated-fill"></i>Sorteos disponibles</div>
      <button class="btn btn-ghost btn-sm" id="btnRefresh"><i class="bi bi-arrow-clockwise"></i></button>
    </div>
    <div class="sorteo-grid" id="sorteosList">
      <div class="spin-wrap"><div class="spinner"></div></div>
    </div>
  </div>

  <div class="section" id="sec-historial">
    <div class="sec-head">
      <div class="sec-title"><i class="bi bi-clock-history"></i>Mi historial</div>
    </div>
    <div id="historialList"><div class="spin-wrap"><div class="spinner"></div></div></div>
  </div>

  <div class="section" id="sec-pagos">
    <div class="sec-head">
      <div class="sec-title"><i class="bi bi-receipt"></i>Mis comprobantes</div>
    </div>
    <div id="pagosList"><div class="spin-wrap"><div class="spinner"></div></div></div>
  </div>
</div>

<nav class="tab-bar-mobile">
  <div class="tbm-grid">
    <button class="tbm active" data-sec="sorteos"><i class="bi bi-ticket-perforated-fill"></i>Sorteos</button>
    <button class="tbm" data-sec="historial"><i class="bi bi-clock-history"></i>Historial</button>
    <button class="tbm" data-sec="pagos"><i class="bi bi-receipt"></i>Pagos</button>
  </div>
</nav>

<script>
window.__sectionLoaders = {};
window.showSection = function(sec) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  const el = document.getElementById('sec-' + sec);
  if (el) el.classList.add('active');
  document.querySelectorAll('[data-sec]').forEach(b => b.classList.toggle('active', b.dataset.sec === sec));
  if (window.__sectionLoaders[sec]) window.__sectionLoaders[sec]();
};
document.querySelectorAll('[data-sec]').forEach(btn =>
  btn.addEventListener('click', () => window.showSection(btn.dataset.sec)));
</script>

<script type="module" src="../../assets/js/usuario.js"></script>
</body>
</html>