<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panel Admin | El Padrino</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Source+Sans+3:wght@400;600&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://cdn.datatables.net/2.0.3/css/dataTables.dataTables.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<style>
:root{
  --ink:#0c0a07;--ink2:#131009;--ink3:#1b1610;--ink4:#221c14;
  --red:#8b1a1a;--red2:#b52020;
  --gold:#b8860b;--gold2:#d4a017;--gold3:#e8c04a;
  --cream:#e6dcc8;--muted:#8a7a62;--dim:#554535;
  --border:rgba(139,26,26,.22);--bord-g:rgba(212,160,23,.14);
  --sw:230px;--th:58px;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;overflow:hidden}
body{font-family:'Source Sans 3',sans-serif;background:var(--ink);color:var(--cream)}
button{font-family:inherit;cursor:pointer}
input,textarea,select{font-family:inherit}
::-webkit-scrollbar{width:5px;height:5px}
::-webkit-scrollbar-track{background:var(--ink2)}
::-webkit-scrollbar-thumb{background:var(--dim);border-radius:3px}

/* TOPBAR */
.topbar{
  position:fixed;top:0;left:0;right:0;height:var(--th);z-index:400;
  background:var(--ink2);border-bottom:1px solid var(--border);
  display:flex;align-items:center;justify-content:space-between;
  padding:0 1.2rem;
}
.tb-brand{
  font-family:'Oswald',sans-serif;font-size:1.22rem;font-weight:700;
  color:var(--gold2);letter-spacing:.1em;
  display:flex;align-items:center;gap:.45rem;
}
.tb-right{display:flex;align-items:center;gap:.65rem}
.tb-user{font-size:.85rem;color:var(--muted);display:flex;align-items:center;gap:.3rem}
.tb-user i{color:var(--gold2)}
.btn-logout{
  font-family:'Oswald',sans-serif;font-size:.82rem;font-weight:600;
  letter-spacing:.07em;padding:.35rem .85rem;border-radius:5px;
  background:var(--red);color:#fff;border:none;
  display:flex;align-items:center;gap:.3rem;transition:background .2s;
}
.btn-logout:hover{background:var(--red2)}
.hamburger{display:none;background:none;border:none;color:var(--gold2);font-size:1.4rem;padding:.15rem .35rem}

/* LAYOUT */
.layout{display:flex;padding-top:var(--th);height:100vh}
.sidebar-overlay{display:none;position:fixed;inset:0;z-index:300;background:rgba(0,0,0,.6)}

/* SIDEBAR */
.sidebar{
  width:var(--sw);flex-shrink:0;
  background:var(--ink2);border-right:1px solid var(--border);
  display:flex;flex-direction:column;overflow-y:auto;
  transition:transform .25s ease;
}
.sb-sec{
  padding:.85rem 1.1rem .25rem;
  font-family:'Oswald',sans-serif;font-size:.64rem;
  letter-spacing:.22em;text-transform:uppercase;color:var(--dim);
}
.nav-item{
  display:flex;align-items:center;gap:.65rem;
  width:calc(100% - .9rem);margin:.1rem .45rem;
  padding:.6rem .85rem;border-radius:7px;
  background:transparent;border:1px solid transparent;
  color:var(--cream);font-size:.92rem;transition:all .18s;
}
.nav-item i{font-size:.95rem;color:var(--gold);flex-shrink:0;width:17px;text-align:center}
.nav-item:hover{background:rgba(212,160,23,.06);border-color:var(--bord-g)}
.nav-item.active{background:rgba(139,26,26,.22);border-color:var(--border);color:var(--gold2)}
.nav-item.active i{color:var(--gold2)}
.sb-footer{margin-top:auto;padding:.85rem .6rem;border-top:1px solid var(--border)}
.sb-logout{
  display:flex;align-items:center;justify-content:center;gap:.45rem;
  width:100%;padding:.55rem;border-radius:7px;
  background:rgba(139,26,26,.18);color:#f87171;
  border:1px solid rgba(139,26,26,.3);
  font-family:'Oswald',sans-serif;font-size:.88rem;font-weight:600;
  letter-spacing:.07em;transition:background .2s;
}
.sb-logout:hover{background:rgba(139,26,26,.35)}

/* MAIN */
.main{flex:1;overflow-y:auto;padding:1.7rem 1.9rem;background:var(--ink)}

/* PAGE HEADER */
.ph{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:1.7rem;flex-wrap:wrap;gap:.8rem}
.ph-title{
  font-family:'Oswald',sans-serif;font-size:1.5rem;font-weight:700;
  letter-spacing:.03em;color:#fff;display:flex;align-items:center;gap:.5rem;line-height:1;
}
.ph-title i{color:var(--gold2)}
.ph-sub{font-size:.85rem;color:var(--muted);margin-top:.3rem}
.ph-actions{display:flex;gap:.5rem;flex-wrap:wrap;align-items:center}

/* STAT GRID */
.stat-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(170px,1fr));gap:.9rem;margin-bottom:1.7rem}
.sc{
  background:var(--ink2);border:1px solid var(--border);border-radius:11px;
  padding:1.15rem 1rem;position:relative;overflow:hidden;
  transition:border-color .2s,transform .2s;
}
.sc:hover{border-color:rgba(212,160,23,.28);transform:translateY(-2px)}
.sc-bar{position:absolute;left:0;top:0;bottom:0;width:3px}
.sc-bar.r{background:var(--red2)}.sc-bar.g{background:var(--gold2)}
.sc-bar.gr{background:#3a8a3a}.sc-bar.b{background:#1a5a9a}
.sc-icon{font-size:1.5rem;margin-bottom:.5rem}
.sc-val{font-family:'Oswald',sans-serif;font-size:2rem;font-weight:700;color:#fff;line-height:1;margin-bottom:.2rem}
.sc-lbl{font-size:.73rem;color:var(--muted);text-transform:uppercase;letter-spacing:.1em}

/* PANEL */
.panel{background:var(--ink2);border:1px solid var(--border);border-radius:12px;overflow:hidden;margin-bottom:1.3rem}
.panel-head{
  padding:.85rem 1.3rem;border-bottom:1px solid var(--border);
  display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:.5rem;
  background:var(--ink3);
}
.panel-title{
  font-family:'Oswald',sans-serif;font-size:.97rem;font-weight:600;
  letter-spacing:.07em;color:var(--gold2);display:flex;align-items:center;gap:.4rem;
}
.panel-body{padding:1.1rem 1.3rem}

/* BTNS */
.btn{
  font-family:'Oswald',sans-serif;font-weight:600;letter-spacing:.07em;
  border:none;border-radius:6px;cursor:pointer;
  transition:all .18s;display:inline-flex;align-items:center;gap:.32rem;
}
.btn-sm{font-size:.76rem;padding:.28rem .7rem}
.btn-md{font-size:.88rem;padding:.48rem 1.1rem}
.btn-lg{font-size:.98rem;padding:.62rem 1.5rem}
.btn-red{background:var(--red);color:#fff}.btn-red:hover{background:var(--red2)}
.btn-gold{background:var(--gold2);color:#1a1209;font-weight:700}.btn-gold:hover{background:var(--gold3)}
.btn-ghost{background:rgba(212,160,23,.09);color:var(--gold2);border:1px solid var(--bord-g)}.btn-ghost:hover{background:rgba(212,160,23,.18)}
.btn-danger{background:rgba(139,26,26,.2);color:#f87171;border:1px solid rgba(139,26,26,.32)}.btn-danger:hover{background:rgba(139,26,26,.38)}
.btn-success{background:rgba(58,138,58,.16);color:#4ade80;border:1px solid rgba(58,138,58,.28)}.btn-success:hover{background:rgba(58,138,58,.3)}
.btn-info{background:rgba(26,90,154,.16);color:#60a5fa;border:1px solid rgba(26,90,154,.28)}.btn-info:hover{background:rgba(26,90,154,.3)}

/* BADGES */
.bdg{
  display:inline-flex;align-items:center;gap:.22rem;
  font-family:'Oswald',sans-serif;font-size:.7rem;font-weight:600;
  letter-spacing:.07em;padding:.2rem .6rem;border-radius:20px;white-space:nowrap;
}
.bdg-p{background:rgba(212,160,23,.14);color:var(--gold2);border:1px solid rgba(212,160,23,.28)}
.bdg-ok{background:rgba(58,138,58,.14);color:#4ade80;border:1px solid rgba(58,138,58,.28)}
.bdg-bad{background:rgba(139,26,26,.2);color:#f87171;border:1px solid rgba(139,26,26,.32)}
.bdg-open{background:rgba(26,90,154,.15);color:#60a5fa;border:1px solid rgba(26,90,154,.3)}
.bdg-closed{background:rgba(60,60,60,.22);color:#9ca3af;border:1px solid rgba(80,80,80,.28)}
.bdg-win{background:linear-gradient(135deg,rgba(139,26,26,.2),rgba(184,134,11,.2));color:var(--gold2);border:1px solid rgba(212,160,23,.3)}

/* DT OVERRIDE */
.dt-container{color:var(--cream)}
.dt-container .dt-search input,.dt-container .dt-length select{
  background:var(--ink3)!important;border:1px solid var(--border)!important;
  color:var(--cream)!important;border-radius:5px!important;padding:.3rem .7rem!important;outline:none!important;
}
.dt-container .dt-search input:focus{border-color:var(--gold2)!important}
.dt-container .dt-info,.dt-container .dt-paging{font-size:.82rem;color:var(--muted)}
.dt-container .dt-paging-button{
  background:var(--ink3)!important;color:var(--muted)!important;
  border:1px solid var(--border)!important;border-radius:5px!important;
  padding:.24rem .6rem!important;margin:0 .12rem!important;
  font-family:'Oswald',sans-serif!important;font-size:.8rem!important;cursor:pointer!important;
}
.dt-container .dt-paging-button:hover:not(.disabled){background:rgba(212,160,23,.1)!important;color:var(--gold2)!important;border-color:var(--bord-g)!important}
.dt-container .dt-paging-button.current{background:var(--red)!important;color:#fff!important;border-color:var(--red)!important}
table.dataTable{border-collapse:separate!important;border-spacing:0!important;width:100%!important}
table.dataTable thead tr th{
  background:var(--ink3)!important;border-bottom:2px solid var(--border)!important;border-top:none!important;
  color:var(--gold2)!important;font-family:'Oswald',sans-serif!important;
  font-size:.76rem!important;letter-spacing:.14em!important;text-transform:uppercase!important;
  padding:.72rem .9rem!important;font-weight:600!important;
}
table.dataTable tbody tr{background:var(--ink2)!important;transition:background .14s}
table.dataTable tbody tr:hover{background:var(--ink3)!important}
table.dataTable tbody tr td{
  padding:.72rem .9rem!important;border-bottom:1px solid rgba(139,26,26,.07)!important;
  border-top:none!important;font-size:.88rem;vertical-align:middle;color:var(--cream)!important;
}
table.dataTable tbody tr:last-child td{border-bottom:none!important}

/* SORTEO CARD */
.sorteo-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem}
.sorteo-card{
  background:var(--ink3);border:1px solid var(--border);border-radius:11px;
  overflow:hidden;transition:border-color .2s,transform .18s;
}
.sorteo-card:hover{border-color:rgba(212,160,23,.28);transform:translateY(-2px)}
.sorteo-card-head{padding:1rem 1.1rem;border-bottom:1px solid var(--border)}
.sorteo-card-head h3{font-family:'Oswald',sans-serif;font-size:1.05rem;font-weight:600;color:#fff;margin-bottom:.2rem}
.sorteo-card-head p{font-size:.81rem;color:var(--muted)}
.sorteo-card-mid{padding:.85rem 1.1rem}
.prog-label{display:flex;justify-content:space-between;align-items:center;margin-bottom:.42rem;font-size:.8rem}
.prog-label span:last-child{font-family:'Oswald',sans-serif;font-weight:700;color:var(--gold2)}
.prog-bg{height:7px;background:rgba(255,255,255,.06);border-radius:10px;overflow:hidden}
.prog-fill{height:100%;border-radius:10px;background:linear-gradient(90deg,var(--red),var(--gold2));transition:width .5s}
.prog-fill.full{background:linear-gradient(90deg,#2d6a2d,#4ade80)}
.sorteo-card-foot{
  padding:.7rem 1.1rem;background:var(--ink2);border-top:1px solid var(--border);
  display:flex;align-items:center;justify-content:space-between;gap:.5rem;flex-wrap:wrap;
}

/* WINNER */
.winner-card{
  display:flex;align-items:center;gap:.85rem;
  background:rgba(212,160,23,.04);border:1px solid rgba(212,160,23,.13);
  border-radius:10px;padding:.85rem 1rem;margin-bottom:.6rem;
  transition:border-color .18s;
}
.winner-card:hover{border-color:rgba(212,160,23,.28)}
.winner-av{
  width:40px;height:40px;border-radius:50%;flex-shrink:0;
  background:linear-gradient(135deg,var(--red),var(--gold2));
  display:flex;align-items:center;justify-content:center;
  font-family:'Oswald',sans-serif;font-size:1.1rem;font-weight:700;color:#fff;
}
.winner-info h4{font-family:'Oswald',sans-serif;font-size:.93rem;color:var(--gold2)}
.winner-info p{font-size:.78rem;color:var(--muted)}
.winner-num{
  margin-left:auto;flex-shrink:0;
  font-family:'Oswald',sans-serif;font-size:.75rem;font-weight:700;
  background:linear-gradient(135deg,var(--red),var(--gold2));
  color:#fff;padding:.22rem .7rem;border-radius:20px;
  display:flex;align-items:center;gap:.25rem;
}

/* FORM FIELDS */
.field{margin-bottom:1rem}
.field label{
  display:block;font-family:'Oswald',sans-serif;font-size:.73rem;
  letter-spacing:.18em;text-transform:uppercase;color:var(--muted);margin-bottom:.38rem;
}
.field input,.field select,.field textarea{
  width:100%;background:var(--ink3);border:1px solid var(--border);
  color:var(--cream);border-radius:7px;padding:.58rem .82rem;
  font-size:.93rem;outline:none;transition:border-color .2s;
}
.field input:focus,.field select:focus{border-color:var(--gold2)}
.field input::placeholder{color:var(--dim)}
.field select option{background:var(--ink3)}

/* EMPTY */
.empty{text-align:center;padding:3.5rem 1rem}
.empty i{font-size:2.8rem;color:var(--dim);display:block;margin-bottom:.7rem}
.empty p{color:var(--muted);font-size:.95rem}

/* SPIN */
.spin-wrap{display:flex;align-items:center;justify-content:center;padding:4rem}
.spinner{width:34px;height:34px;border:3px solid rgba(212,160,23,.12);border-top-color:var(--gold2);border-radius:50%;animation:spin .7s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* SWAL THEME */
.swal2-popup{background:var(--ink2)!important;border:1px solid var(--border)!important;color:var(--cream)!important;font-family:'Source Sans 3',sans-serif!important;border-radius:14px!important}
.swal2-title{color:#fff!important;font-family:'Oswald',sans-serif!important;letter-spacing:.04em!important}
.swal2-html-container{color:var(--muted)!important;font-size:.97rem!important}
.swal2-confirm{background:var(--red)!important;font-family:'Oswald',sans-serif!important;font-weight:600!important;letter-spacing:.07em!important;border-radius:6px!important}
.swal2-cancel{background:var(--ink3)!important;color:var(--muted)!important;border:1px solid var(--border)!important;font-family:'Oswald',sans-serif!important;border-radius:6px!important}
.swal2-confirm:hover{background:var(--red2)!important}
.swal2-input,.swal2-textarea{background:var(--ink3)!important;border:1px solid var(--border)!important;color:var(--cream)!important;border-radius:7px!important}
.swal2-input:focus{border-color:var(--gold2)!important;box-shadow:none!important}
.swal2-icon.swal2-success .swal2-success-ring{border-color:rgba(58,138,58,.3)!important}
.swal2-icon.swal2-success [class^=swal2-success-line]{background:#4ade80!important}

/* ACT ROW */
.act-row{display:flex;align-items:center;justify-content:space-between;padding:.62rem 0;border-bottom:1px solid rgba(139,26,26,.08);flex-wrap:wrap;gap:.4rem}
.act-row:last-child{border-bottom:none}
.act-left{display:flex;align-items:center;gap:.65rem}
.act-av{width:33px;height:33px;border-radius:50%;background:rgba(139,26,26,.18);display:flex;align-items:center;justify-content:center;font-size:.88rem;color:var(--gold)}
.act-name{font-size:.9rem;font-weight:600}
.act-date{font-size:.74rem;color:var(--muted)}
.act-amount{font-family:'Oswald',sans-serif;font-size:.95rem;color:var(--gold2)}

#premioImgPreview{width:100%;max-height:170px;object-fit:cover;border-radius:8px;border:1px solid var(--border);display:none;margin-top:.55rem}

/* RESPONSIVE */
@media(max-width:768px){
  html,body{overflow:auto}
  .layout{overflow:visible}
  .main{overflow:visible;padding:1rem}
  .sidebar{position:fixed;top:var(--th);left:0;bottom:0;z-index:350;transform:translateX(-100%)}
  .sidebar.open{transform:translateX(0)}
  .sidebar-overlay.open{display:block}
  .hamburger{display:block}
  .tb-user span{display:none}
  .stat-grid{grid-template-columns:repeat(2,1fr)}
  .sorteo-grid{grid-template-columns:1fr}
}
@media(max-width:400px){.stat-grid{grid-template-columns:1fr}}
</style>
</head>
<body>

<header class="topbar">
  <div style="display:flex;align-items:center;gap:.8rem">
    <button class="hamburger" id="hamburgerBtn"><i class="bi bi-list"></i></button>
    <div class="tb-brand">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#d4a017" stroke-width="2.3" stroke-linecap="round" stroke-linejoin="round">
        <path d="M12 2L4 7v5c0 5 3.5 9.74 8 11 4.5-1.26 8-6 8-11V7L12 2z"/>
      </svg>
      EL PADRINO
    </div>
  </div>
  <div class="tb-right">
    <div class="tb-user"><i class="bi bi-shield-fill"></i><span id="adminName">—</span></div>
    <button class="btn-logout" id="logoutBtn"><i class="bi bi-box-arrow-right"></i> Salir</button>
  </div>
</header>

<div class="layout">
  <div class="sidebar-overlay" id="sidebarOverlay"></div>
  <aside class="sidebar" id="sidebar">
    <div class="sb-sec">Principal</div>
    <button class="nav-item active" data-view="dashboard"><i class="bi bi-speedometer2"></i>Dashboard</button>
    <div class="sb-sec">Gestión</div>
    <button class="nav-item" data-view="sorteos"><i class="bi bi-ticket-perforated-fill"></i>Sorteos</button>
    <button class="nav-item" data-view="ganadores"><i class="bi bi-trophy-fill"></i>Ganadores</button>
    <button class="nav-item" data-view="usuarios"><i class="bi bi-people-fill"></i>Usuarios</button>
    <button class="nav-item" data-view="trabajadores"><i class="bi bi-person-badge-fill"></i>Trabajadores</button>
    <div class="sb-sec">Contenido</div>
    <button class="nav-item" data-view="premios"><i class="bi bi-award-fill"></i>Premios</button>
    <div class="sb-footer">
      <button class="sb-logout" id="logoutBtn2"><i class="bi bi-box-arrow-right"></i> Cerrar sesión</button>
    </div>
  </aside>

  <main class="main" id="mainContent">
    <div class="spin-wrap"><div class="spinner"></div></div>
  </main>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/2.0.3/js/dataTables.min.js"></script>
<script type="module" src="../../assets/js/admin.js"></script>
<script>
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('sidebarOverlay');
document.getElementById('hamburgerBtn').addEventListener('click',()=>{sidebar.classList.toggle('open');overlay.classList.toggle('open')});
overlay.addEventListener('click',()=>{sidebar.classList.remove('open');overlay.classList.remove('open')});
document.querySelectorAll('.nav-item').forEach(b=>b.addEventListener('click',()=>{if(window.innerWidth<769){sidebar.classList.remove('open');overlay.classList.remove('open')}}));
</script>
</body>
</html>